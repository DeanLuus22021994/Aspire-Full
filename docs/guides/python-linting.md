# Python Linting

Python lint settings are centralized to keep VS Code, VS Code Insiders, and CLI tooling aligned.

- Source of truth: `.config/python-lint.yaml` (YAML/JSON). Update this file to change the global line length or shared rules.
- Generator: `python tools/python-lint/sync_configs.py` reads the YAML and rewrites `.flake8`, `.pylintrc`, `.pycodestyle`, `pyrightconfig.json`, plus `.config/python-lint-roots.yaml` and `.config/python-lint-excludes.yaml`. Those YAML exports give shell scripts and other ecosystems a lightweight way to consume `paths.lint_roots` and `vendor_globs` without parsing the full config.
- Runner: `python tools/python-lint/run.py` shells out to `pylint` after reading `.config/python-lint.yaml`. It now draws its default directories from `runner.auto_targets` (which aliases `paths.lint_roots`) and automatically injects the shared `pylint.disable` list when no `--disable` flag is supplied. When VS Code passes direct file targets the runner filters anything matching `vendor_globs` before delegating.
- Editors: VS Code and VS Code Insiders automatically pick up `.flake8` and `.pylintrc`. To prevent bundled extensions under `.vscode/` and `.vscode-test/` from triggering diagnostics, the workspace sets:
	```jsonc
	"python.linting.ignorePatterns": [
		".vscode",
		".vscode/**",
		".vscode-test",
		".vscode-test/**",
		".vscode-*",
		".vscode-*/**"
	],
	"python.linting.pylintPath": "${workspaceFolder}/tools/python-lint/pylint_wrapper.py",
	"pylint.path": "${workspaceFolder}/tools/python-lint/pylint_wrapper.py"
	```
	The wrapper simply proxies to `run.py`, so both CLI and editor linting share the same filtering logic. Keep these settings in sync with `.config/python-lint.yaml` whenever new vendor directories need to be muted.
- Formatters and other extensions that rely on `pycodestyle` inherit the same line length and ignore list via the generated `.pycodestyle` file, so no manual duplication is required in editor settings.
- Language server: `pyrightconfig.json` is generated by `tools/python-lint/sync_configs.py` and mirrors `vendor_globs`, ensuring Pyright/Pylance never indexes `.vscode*` folders regardless of editor state.

After editing the YAML file, run the sync script (or re-run the task defined above) to propagate updates. This keeps both linters consistent while still using their native config formats for compatibility.
