#pragma checksum "C:\Users\Dean\source\Aspire-Full - 1\Web\Aspire-Full.WebAssembly\Pages\TensorHub.razor" "{8829d00f-11b8-4213-878b-770e8597ac16}" "0c35ee6bb36c2ad9c39d997605ed600d11346796157dc35ffe225d9532f1c1a0"
// <auto-generated/>
#pragma warning disable 1591
namespace Aspire_Full.WebAssembly.Pages
{
    #line default
    using global::System;
    using global::System.Threading.Tasks;
#nullable restore
#line (1,2)-(1,34) "C:\Users\Dean\source\Aspire-Full - 1\Web\Aspire-Full.WebAssembly\Pages\_Imports.razor"
using System.Collections.Generic

#nullable disable
    ;
#nullable restore
#line (2,2)-(2,23) "C:\Users\Dean\source\Aspire-Full - 1\Web\Aspire-Full.WebAssembly\Pages\_Imports.razor"
using System.Net.Http

#nullable disable
    ;
#nullable restore
#line (3,2)-(3,19) "C:\Users\Dean\source\Aspire-Full - 1\Web\Aspire-Full.WebAssembly\Pages\_Imports.razor"
using System.Linq

#nullable disable
    ;
#nullable restore
#line (4,2)-(4,39) "C:\Users\Dean\source\Aspire-Full - 1\Web\Aspire-Full.WebAssembly\Pages\_Imports.razor"
using Microsoft.AspNetCore.Components

#nullable disable
    ;
#nullable restore
#line (6,2)-(6,45) "C:\Users\Dean\source\Aspire-Full - 1\Web\Aspire-Full.WebAssembly\Pages\_Imports.razor"
using Microsoft.AspNetCore.Components.Forms

#nullable disable
    ;
#nullable restore
#line (7,2)-(7,47) "C:\Users\Dean\source\Aspire-Full - 1\Web\Aspire-Full.WebAssembly\Pages\_Imports.razor"
using Microsoft.AspNetCore.Components.Routing

#nullable disable
    ;
#nullable restore
#line (8,2)-(8,31) "C:\Users\Dean\source\Aspire-Full - 1\Web\Aspire-Full.WebAssembly\Pages\_Imports.razor"
using Aspire_Full.WebAssembly

#nullable disable
    ;
#nullable restore
#line (9,2)-(9,42) "C:\Users\Dean\source\Aspire-Full - 1\Web\Aspire-Full.WebAssembly\Pages\_Imports.razor"
using Aspire_Full.WebAssembly.Components

#nullable disable
    ;
#nullable restore
#line (11,2)-(11,38) "C:\Users\Dean\source\Aspire-Full - 1\Web\Aspire-Full.WebAssembly\Pages\_Imports.razor"
using Aspire_Full.WebAssembly.Shared

#nullable disable
    ;
#nullable restore
#line (2,2)-(2,26) "C:\Users\Dean\source\Aspire-Full - 1\Web\Aspire-Full.WebAssembly\Pages\TensorHub.razor"
using Aspire_Full.Tensor

#nullable disable
    ;
#nullable restore
#line (3,2)-(3,40) "C:\Users\Dean\source\Aspire-Full - 1\Web\Aspire-Full.WebAssembly\Pages\TensorHub.razor"
using Aspire_Full.WebAssembly.Services

#nullable disable
    ;
#nullable restore
#line (4,2)-(4,33) "C:\Users\Dean\source\Aspire-Full - 1\Web\Aspire-Full.WebAssembly\Pages\TensorHub.razor"
using Aspire_Full.Shared.Models

#nullable disable
    ;
#nullable restore
#line (5,2)-(5,36) "C:\Users\Dean\source\Aspire-Full - 1\Web\Aspire-Full.WebAssembly\Pages\TensorHub.razor"
using Microsoft.Extensions.Options

#nullable disable
    ;
#nullable restore
#line (6,2)-(6,24) "C:\Users\Dean\source\Aspire-Full - 1\Web\Aspire-Full.WebAssembly\Pages\TensorHub.razor"
using System.Text.Json

#nullable disable
    ;
#nullable restore
#line (7,2)-(7,43) "C:\Users\Dean\source\Aspire-Full - 1\Web\Aspire-Full.WebAssembly\Pages\TensorHub.razor"
using Microsoft.AspNetCore.Components.Web

#nullable disable
    ;
    #line default
    #line hidden
    [global::Microsoft.AspNetCore.Components.RouteAttribute(
    // language=Route,Component
#nullable restore
#line (1,7)-(1,20) "C:\Users\Dean\source\Aspire-Full - 1\Web\Aspire-Full.WebAssembly\Pages\TensorHub.razor"
"/tensor-hub"

#line default
#line hidden
#nullable disable
    )]
    #nullable restore
    public partial class TensorHub : global::Microsoft.AspNetCore.Components.ComponentBase
    #nullable disable
    {
        #pragma warning disable 1998
        protected override void BuildRenderTree(global::Microsoft.AspNetCore.Components.Rendering.RenderTreeBuilder __builder)
        {
            __builder.OpenComponent<global::Microsoft.AspNetCore.Components.Web.PageTitle>(0);
            __builder.AddAttribute(1, "ChildContent", (global::Microsoft.AspNetCore.Components.RenderFragment)((__builder2) => {
                __builder2.AddContent(2, "Tensor Hub");
            }
            ));
            __builder.CloseComponent();
            __builder.AddMarkupContent(3, "\n\n");
            __builder.OpenElement(4, "section");
            __builder.AddAttribute(5, "class", "tensor-hub");
            __builder.AddMarkupContent(6, "<header><h1>Edge Tensor Hub</h1>\n        <p class=\"muted\">Queue orchestrated jobs, run WebGPU previews, and inspect embeddings side-by-side.</p></header>\n\n    ");
            __builder.OpenElement(7, "div");
            __builder.AddAttribute(8, "class", "tensor-grid");
            __builder.OpenElement(9, "div");
            __builder.AddAttribute(10, "class", "grid-column large");
            __builder.OpenComponent<global::Aspire_Full.WebAssembly.Components.TensorJobComposer>(11);
            __builder.AddComponentParameter(12, nameof(global::Aspire_Full.WebAssembly.Components.TensorJobComposer.
#nullable restore
#line (24,32)-(24,38) "C:\Users\Dean\source\Aspire-Full - 1\Web\Aspire-Full.WebAssembly\Pages\TensorHub.razor"
Models

#line default
#line hidden
#nullable disable
            ), global::Microsoft.AspNetCore.Components.CompilerServices.RuntimeHelpers.TypeCheck<global::System.Collections.Generic.IReadOnlyList<global::Aspire_Full.Tensor.TensorModelDescriptor>>(
#nullable restore
#line (24,40)-(24,47) "C:\Users\Dean\source\Aspire-Full - 1\Web\Aspire-Full.WebAssembly\Pages\TensorHub.razor"
_models

#line default
#line hidden
#nullable disable
            ));
            __builder.AddComponentParameter(13, nameof(global::Aspire_Full.WebAssembly.Components.TensorJobComposer.
#nullable restore
#line (24,49)-(24,67) "C:\Users\Dean\source\Aspire-Full - 1\Web\Aspire-Full.WebAssembly\Pages\TensorHub.razor"
ExecutionProviders

#line default
#line hidden
#nullable disable
            ), global::Microsoft.AspNetCore.Components.CompilerServices.RuntimeHelpers.TypeCheck<global::System.Collections.Generic.IReadOnlyList<global::System.String>>(
#nullable restore
#line (24,69)-(24,88) "C:\Users\Dean\source\Aspire-Full - 1\Web\Aspire-Full.WebAssembly\Pages\TensorHub.razor"
_executionProviders

#line default
#line hidden
#nullable disable
            ));
            __builder.AddComponentParameter(14, nameof(global::Aspire_Full.WebAssembly.Components.TensorJobComposer.
#nullable restore
#line (24,90)-(24,109) "C:\Users\Dean\source\Aspire-Full - 1\Web\Aspire-Full.WebAssembly\Pages\TensorHub.razor"
RecommendedProvider

#line default
#line hidden
#nullable disable
            ), "_capabilities?.RecommendedExecutionProvider");
            __builder.AddComponentParameter(15, nameof(global::Aspire_Full.WebAssembly.Components.TensorJobComposer.
#nullable restore
#line (24,156)-(24,162) "C:\Users\Dean\source\Aspire-Full - 1\Web\Aspire-Full.WebAssembly\Pages\TensorHub.razor"
IsBusy

#line default
#line hidden
#nullable disable
            ), global::Microsoft.AspNetCore.Components.CompilerServices.RuntimeHelpers.TypeCheck<global::System.Boolean>(
#nullable restore
#line (24,164)-(24,177) "C:\Users\Dean\source\Aspire-Full - 1\Web\Aspire-Full.WebAssembly\Pages\TensorHub.razor"
_isSubmitting

#line default
#line hidden
#nullable disable
            ));
            __builder.AddComponentParameter(16, nameof(global::Aspire_Full.WebAssembly.Components.TensorJobComposer.
#nullable restore
#line (24,179)-(24,192) "C:\Users\Dean\source\Aspire-Full - 1\Web\Aspire-Full.WebAssembly\Pages\TensorHub.razor"
StatusMessage

#line default
#line hidden
#nullable disable
            ), "_statusMessage");
            __builder.AddComponentParameter(17, nameof(global::Aspire_Full.WebAssembly.Components.TensorJobComposer.
#nullable restore
#line (24,210)-(24,218) "C:\Users\Dean\source\Aspire-Full - 1\Web\Aspire-Full.WebAssembly\Pages\TensorHub.razor"
OnSubmit

#line default
#line hidden
#nullable disable
            ), global::Microsoft.AspNetCore.Components.CompilerServices.RuntimeHelpers.TypeCheck<global::Microsoft.AspNetCore.Components.EventCallback<global::Aspire_Full.WebAssembly.Components.TensorJobComposerSubmission>>(global::Microsoft.AspNetCore.Components.EventCallback.Factory.Create<global::Aspire_Full.WebAssembly.Components.TensorJobComposerSubmission>(this, 
#nullable restore
#line (24,220)-(24,244) "C:\Users\Dean\source\Aspire-Full - 1\Web\Aspire-Full.WebAssembly\Pages\TensorHub.razor"
HandleJobSubmissionAsync

#line default
#line hidden
#nullable disable
            )));
            __builder.CloseComponent();
            __builder.CloseElement();
            __builder.AddMarkupContent(18, "\n        ");
            __builder.OpenElement(19, "div");
            __builder.AddAttribute(20, "class", "grid-column");
            __builder.OpenComponent<global::Aspire_Full.WebAssembly.Components.TensorCapabilityPanel>(21);
            __builder.AddComponentParameter(22, nameof(global::Aspire_Full.WebAssembly.Components.TensorCapabilityPanel.
#nullable restore
#line (27,36)-(27,48) "C:\Users\Dean\source\Aspire-Full - 1\Web\Aspire-Full.WebAssembly\Pages\TensorHub.razor"
Capabilities

#line default
#line hidden
#nullable disable
            ), global::Microsoft.AspNetCore.Components.CompilerServices.RuntimeHelpers.TypeCheck<global::Aspire_Full.Tensor.TensorCapabilityResponse>(
#nullable restore
#line (27,50)-(27,63) "C:\Users\Dean\source\Aspire-Full - 1\Web\Aspire-Full.WebAssembly\Pages\TensorHub.razor"
_capabilities

#line default
#line hidden
#nullable disable
            ));
            __builder.AddComponentParameter(23, nameof(global::Aspire_Full.WebAssembly.Components.TensorCapabilityPanel.
#nullable restore
#line (27,65)-(27,71) "C:\Users\Dean\source\Aspire-Full - 1\Web\Aspire-Full.WebAssembly\Pages\TensorHub.razor"
IsBusy

#line default
#line hidden
#nullable disable
            ), global::Microsoft.AspNetCore.Components.CompilerServices.RuntimeHelpers.TypeCheck<global::System.Boolean>(
#nullable restore
#line (27,73)-(27,88) "C:\Users\Dean\source\Aspire-Full - 1\Web\Aspire-Full.WebAssembly\Pages\TensorHub.razor"
_capabilityBusy

#line default
#line hidden
#nullable disable
            ));
            __builder.CloseComponent();
            __builder.AddMarkupContent(24, "\n            ");
            __builder.OpenComponent<global::Aspire_Full.WebAssembly.Components.EmbeddingVectorPanel>(25);
            __builder.AddComponentParameter(26, nameof(global::Aspire_Full.WebAssembly.Components.EmbeddingVectorPanel.
#nullable restore
#line (28,35)-(28,48) "C:\Users\Dean\source\Aspire-Full - 1\Web\Aspire-Full.WebAssembly\Pages\TensorHub.razor"
VectorPreview

#line default
#line hidden
#nullable disable
            ), global::Microsoft.AspNetCore.Components.CompilerServices.RuntimeHelpers.TypeCheck<global::System.Collections.Generic.IReadOnlyList<global::System.Double>>(
#nullable restore
#line (28,50)-(28,67) "C:\Users\Dean\source\Aspire-Full - 1\Web\Aspire-Full.WebAssembly\Pages\TensorHub.razor"
_embeddingPreview

#line default
#line hidden
#nullable disable
            ));
            __builder.AddComponentParameter(27, nameof(global::Aspire_Full.WebAssembly.Components.EmbeddingVectorPanel.
#nullable restore
#line (28,69)-(28,86) "C:\Users\Dean\source\Aspire-Full - 1\Web\Aspire-Full.WebAssembly\Pages\TensorHub.razor"
ExecutionProvider

#line default
#line hidden
#nullable disable
            ), "_localExecutionProvider");
            __builder.CloseComponent();
            __builder.CloseElement();
            __builder.CloseElement();
            __builder.AddMarkupContent(28, "\n\n    ");
            __builder.OpenElement(29, "section");
            __builder.AddAttribute(30, "class", "tensor-stream-section");
            __builder.OpenComponent<global::Aspire_Full.WebAssembly.Components.TensorInferenceStream>(31);
            __builder.AddComponentParameter(32, nameof(global::Aspire_Full.WebAssembly.Components.TensorInferenceStream.
#nullable restore
#line (33,32)-(33,43) "C:\Users\Dean\source\Aspire-Full - 1\Web\Aspire-Full.WebAssembly\Pages\TensorHub.razor"
LocalChunks

#line default
#line hidden
#nullable disable
            ), global::Microsoft.AspNetCore.Components.CompilerServices.RuntimeHelpers.TypeCheck<global::System.Collections.Generic.IReadOnlyList<global::Aspire_Full.Shared.Models.TensorInferenceChunk>>(
#nullable restore
#line (33,45)-(33,57) "C:\Users\Dean\source\Aspire-Full - 1\Web\Aspire-Full.WebAssembly\Pages\TensorHub.razor"
_localChunks

#line default
#line hidden
#nullable disable
            ));
            __builder.AddComponentParameter(33, nameof(global::Aspire_Full.WebAssembly.Components.TensorInferenceStream.
#nullable restore
#line (33,59)-(33,71) "C:\Users\Dean\source\Aspire-Full - 1\Web\Aspire-Full.WebAssembly\Pages\TensorHub.razor"
RemoteChunks

#line default
#line hidden
#nullable disable
            ), global::Microsoft.AspNetCore.Components.CompilerServices.RuntimeHelpers.TypeCheck<global::System.Collections.Generic.IReadOnlyList<global::Aspire_Full.Shared.Models.TensorInferenceChunk>>(
#nullable restore
#line (33,73)-(33,86) "C:\Users\Dean\source\Aspire-Full - 1\Web\Aspire-Full.WebAssembly\Pages\TensorHub.razor"
_remoteChunks

#line default
#line hidden
#nullable disable
            ));
            __builder.AddComponentParameter(34, nameof(global::Aspire_Full.WebAssembly.Components.TensorInferenceStream.
#nullable restore
#line (33,88)-(33,97) "C:\Users\Dean\source\Aspire-Full - 1\Web\Aspire-Full.WebAssembly\Pages\TensorHub.razor"
ActiveJob

#line default
#line hidden
#nullable disable
            ), global::Microsoft.AspNetCore.Components.CompilerServices.RuntimeHelpers.TypeCheck<global::Aspire_Full.Shared.Models.TensorJobStatus>(
#nullable restore
#line (33,99)-(33,109) "C:\Users\Dean\source\Aspire-Full - 1\Web\Aspire-Full.WebAssembly\Pages\TensorHub.razor"
_activeJob

#line default
#line hidden
#nullable disable
            ));
            __builder.CloseComponent();
            __builder.CloseElement();
            __builder.AddMarkupContent(35, "\n\n    ");
            __builder.OpenElement(36, "section");
            __builder.OpenElement(37, "header");
            __builder.AddAttribute(38, "class", "section-header");
            __builder.AddMarkupContent(39, "<div><h2>Job Inspector</h2>\n                <p class=\"muted\">Select a job to hydrate the stream with archived output.</p></div>\n            ");
            __builder.OpenElement(40, "div");
            __builder.AddAttribute(41, "class", "section-actions");
            __builder.OpenElement(42, "button");
            __builder.AddAttribute(43, "class", "refresh");
            __builder.AddAttribute(44, "disabled", 
#nullable restore
#line (43,53)-(43,92) "C:\Users\Dean\source\Aspire-Full - 1\Web\Aspire-Full.WebAssembly\Pages\TensorHub.razor"
_activeJob is null || _jobInspectorBusy

#line default
#line hidden
#nullable disable
            );
            __builder.AddAttribute(45, "onclick", global::Microsoft.AspNetCore.Components.EventCallback.Factory.Create<global::Microsoft.AspNetCore.Components.Web.MouseEventArgs>(this, 
#nullable restore
#line (43,105)-(43,126) "C:\Users\Dean\source\Aspire-Full - 1\Web\Aspire-Full.WebAssembly\Pages\TensorHub.razor"
RefreshActiveJobAsync

#line default
#line hidden
#nullable disable
            ));
#nullable restore
#line (44,23)-(44,80) 25 "C:\Users\Dean\source\Aspire-Full - 1\Web\Aspire-Full.WebAssembly\Pages\TensorHub.razor"
__builder.AddContent(46, !_jobInspectorBusy ? "Refresh Selected" : "Refreshing..."

#line default
#line hidden
#nullable disable
            );
            __builder.CloseElement();
            __builder.CloseElement();
            __builder.CloseElement();
#nullable restore
#line (49,1)-(49,9) "C:\Users\Dean\source\Aspire-Full - 1\Web\Aspire-Full.WebAssembly\Pages\TensorHub.razor"
        

#line default
#line hidden
#nullable disable

#nullable restore
#line (49,10)-(51,1) "C:\Users\Dean\source\Aspire-Full - 1\Web\Aspire-Full.WebAssembly\Pages\TensorHub.razor"
if (!string.IsNullOrWhiteSpace(_jobInspectorMessage))
        {

#line default
#line hidden
#nullable disable

            __builder.OpenElement(47, "p");
            __builder.AddAttribute(48, "class", "status");
#nullable restore
#line (51,32)-(51,52) 25 "C:\Users\Dean\source\Aspire-Full - 1\Web\Aspire-Full.WebAssembly\Pages\TensorHub.razor"
__builder.AddContent(49, _jobInspectorMessage

#line default
#line hidden
#nullable disable
            );
            __builder.CloseElement();
#nullable restore
#line (52,1)-(53,1) "C:\Users\Dean\source\Aspire-Full - 1\Web\Aspire-Full.WebAssembly\Pages\TensorHub.razor"
        }

#line default
#line hidden
#nullable disable

#nullable restore
#line (54,1)-(54,9) "C:\Users\Dean\source\Aspire-Full - 1\Web\Aspire-Full.WebAssembly\Pages\TensorHub.razor"
        

#line default
#line hidden
#nullable disable

#nullable restore
#line (54,10)-(56,1) "C:\Users\Dean\source\Aspire-Full - 1\Web\Aspire-Full.WebAssembly\Pages\TensorHub.razor"
if (_activeJob is null)
        {

#line default
#line hidden
#nullable disable

            __builder.AddMarkupContent(50, "<p class=\"muted\">No job selected. Use the table below to inspect a queued run.</p>");
#nullable restore
#line (57,1)-(60,1) "C:\Users\Dean\source\Aspire-Full - 1\Web\Aspire-Full.WebAssembly\Pages\TensorHub.razor"
        }
        else
        {

#line default
#line hidden
#nullable disable

            __builder.OpenElement(51, "div");
            __builder.AddAttribute(52, "class", "job-inspector");
            __builder.OpenElement(53, "div");
            __builder.AddMarkupContent(54, "<label>Job Id</label>\n                    ");
            __builder.OpenElement(55, "code");
#nullable restore
#line (63,28)-(63,41) 25 "C:\Users\Dean\source\Aspire-Full - 1\Web\Aspire-Full.WebAssembly\Pages\TensorHub.razor"
__builder.AddContent(56, _activeJob.Id

#line default
#line hidden
#nullable disable
            );
            __builder.CloseElement();
            __builder.CloseElement();
            __builder.AddMarkupContent(57, "\n                ");
            __builder.OpenElement(58, "div");
            __builder.AddMarkupContent(59, "<label>Status</label>\n                    ");
            __builder.OpenElement(60, "span");
#nullable restore
#line (67,28)-(67,45) 25 "C:\Users\Dean\source\Aspire-Full - 1\Web\Aspire-Full.WebAssembly\Pages\TensorHub.razor"
__builder.AddContent(61, _activeJob.Status

#line default
#line hidden
#nullable disable
            );
            __builder.CloseElement();
            __builder.CloseElement();
            __builder.AddMarkupContent(62, "\n                ");
            __builder.OpenElement(63, "div");
            __builder.AddMarkupContent(64, "<label>Execution Provider</label>\n                    ");
            __builder.OpenElement(65, "span");
#nullable restore
#line (71,29)-(71,64) 25 "C:\Users\Dean\source\Aspire-Full - 1\Web\Aspire-Full.WebAssembly\Pages\TensorHub.razor"
__builder.AddContent(66, _activeJob.ExecutionProvider ?? "-"

#line default
#line hidden
#nullable disable
            );
            __builder.CloseElement();
            __builder.CloseElement();
            __builder.AddMarkupContent(67, "\n                ");
            __builder.OpenElement(68, "div");
            __builder.AddMarkupContent(69, "<label>Vector Document</label>\n                    ");
            __builder.OpenElement(70, "span");
#nullable restore
#line (75,29)-(75,77) 25 "C:\Users\Dean\source\Aspire-Full - 1\Web\Aspire-Full.WebAssembly\Pages\TensorHub.razor"
__builder.AddContent(71, _activeJob.VectorDocumentId ?? "(not persisted)"

#line default
#line hidden
#nullable disable
            );
            __builder.CloseElement();
            __builder.CloseElement();
            __builder.AddMarkupContent(72, "\n                ");
            __builder.OpenElement(73, "div");
            __builder.AddMarkupContent(74, "<label>Prompt Preview</label>\n                    ");
            __builder.OpenElement(75, "p");
#nullable restore
#line (79,26)-(79,71) 25 "C:\Users\Dean\source\Aspire-Full - 1\Web\Aspire-Full.WebAssembly\Pages\TensorHub.razor"
__builder.AddContent(76, _activeJob.PromptPreview ?? _activeJob.Prompt

#line default
#line hidden
#nullable disable
            );
            __builder.CloseElement();
            __builder.CloseElement();
            __builder.AddMarkupContent(77, "\n                ");
            __builder.OpenElement(78, "div");
            __builder.AddMarkupContent(79, "<label>Created</label>\n                    ");
            __builder.OpenElement(80, "span");
#nullable restore
#line (83,28)-(83,76) 25 "C:\Users\Dean\source\Aspire-Full - 1\Web\Aspire-Full.WebAssembly\Pages\TensorHub.razor"
__builder.AddContent(81, _activeJob.CreatedAt.ToLocalTime().ToString("u")

#line default
#line hidden
#nullable disable
            );
            __builder.CloseElement();
            __builder.CloseElement();
            __builder.AddMarkupContent(82, "\n                ");
            __builder.OpenElement(83, "div");
            __builder.AddMarkupContent(84, "<label>Completed</label>\n                    ");
            __builder.OpenElement(85, "span");
#nullable restore
#line (87,29)-(87,97) 25 "C:\Users\Dean\source\Aspire-Full - 1\Web\Aspire-Full.WebAssembly\Pages\TensorHub.razor"
__builder.AddContent(86, _activeJob.CompletedAt?.ToLocalTime().ToString("u") ?? "in-progress"

#line default
#line hidden
#nullable disable
            );
            __builder.CloseElement();
            __builder.CloseElement();
            __builder.CloseElement();
#nullable restore
#line (90,1)-(91,1) "C:\Users\Dean\source\Aspire-Full - 1\Web\Aspire-Full.WebAssembly\Pages\TensorHub.razor"
        }

#line default
#line hidden
#nullable disable

            __builder.CloseElement();
            __builder.AddMarkupContent(87, "\n\n    ");
            __builder.OpenElement(88, "section");
            __builder.OpenElement(89, "header");
            __builder.AddAttribute(90, "class", "section-header");
            __builder.AddMarkupContent(91, "<h2>Model Catalog</h2>\n            ");
            __builder.OpenElement(92, "button");
            __builder.AddAttribute(93, "class", "refresh");
            __builder.AddAttribute(94, "onclick", global::Microsoft.AspNetCore.Components.EventCallback.Factory.Create<global::Microsoft.AspNetCore.Components.Web.MouseEventArgs>(this, 
#nullable restore
#line (96,47)-(96,66) "C:\Users\Dean\source\Aspire-Full - 1\Web\Aspire-Full.WebAssembly\Pages\TensorHub.razor"
RefreshCatalogAsync

#line default
#line hidden
#nullable disable
            ));
            __builder.AddContent(95, "Refresh");
            __builder.CloseElement();
            __builder.CloseElement();
            __builder.AddMarkupContent(96, "\n        ");
            __builder.OpenComponent<global::Aspire_Full.WebAssembly.Components.TensorModelList>(97);
            __builder.AddComponentParameter(98, nameof(global::Aspire_Full.WebAssembly.Components.TensorModelList.
#nullable restore
#line (98,26)-(98,32) "C:\Users\Dean\source\Aspire-Full - 1\Web\Aspire-Full.WebAssembly\Pages\TensorHub.razor"
Models

#line default
#line hidden
#nullable disable
            ), global::Microsoft.AspNetCore.Components.CompilerServices.RuntimeHelpers.TypeCheck<global::System.Collections.Generic.IReadOnlyList<global::Aspire_Full.Tensor.TensorModelDescriptor>>(
#nullable restore
#line (98,34)-(98,41) "C:\Users\Dean\source\Aspire-Full - 1\Web\Aspire-Full.WebAssembly\Pages\TensorHub.razor"
_models

#line default
#line hidden
#nullable disable
            ));
            __builder.AddComponentParameter(99, nameof(global::Aspire_Full.WebAssembly.Components.TensorModelList.
#nullable restore
#line (98,43)-(98,55) "C:\Users\Dean\source\Aspire-Full - 1\Web\Aspire-Full.WebAssembly\Pages\TensorHub.razor"
Capabilities

#line default
#line hidden
#nullable disable
            ), global::Microsoft.AspNetCore.Components.CompilerServices.RuntimeHelpers.TypeCheck<global::Aspire_Full.Tensor.TensorCapabilityResponse>(
#nullable restore
#line (98,57)-(98,70) "C:\Users\Dean\source\Aspire-Full - 1\Web\Aspire-Full.WebAssembly\Pages\TensorHub.razor"
_capabilities

#line default
#line hidden
#nullable disable
            ));
            __builder.CloseComponent();
            __builder.CloseElement();
            __builder.AddMarkupContent(100, "\n\n    ");
            __builder.OpenElement(101, "section");
            __builder.OpenElement(102, "header");
            __builder.AddAttribute(103, "class", "section-header");
            __builder.AddMarkupContent(104, "<h2>Recent Tensor Jobs</h2>\n            ");
            __builder.OpenElement(105, "button");
            __builder.AddAttribute(106, "class", "refresh");
            __builder.AddAttribute(107, "onclick", global::Microsoft.AspNetCore.Components.EventCallback.Factory.Create<global::Microsoft.AspNetCore.Components.Web.MouseEventArgs>(this, 
#nullable restore
#line (104,47)-(104,63) "C:\Users\Dean\source\Aspire-Full - 1\Web\Aspire-Full.WebAssembly\Pages\TensorHub.razor"
RefreshJobsAsync

#line default
#line hidden
#nullable disable
            ));
            __builder.AddContent(108, "Reload");
            __builder.CloseElement();
            __builder.CloseElement();
#nullable restore
#line (106,1)-(106,9) "C:\Users\Dean\source\Aspire-Full - 1\Web\Aspire-Full.WebAssembly\Pages\TensorHub.razor"
        

#line default
#line hidden
#nullable disable

#nullable restore
#line (106,10)-(108,1) "C:\Users\Dean\source\Aspire-Full - 1\Web\Aspire-Full.WebAssembly\Pages\TensorHub.razor"
if (_jobs.Count == 0)
        {

#line default
#line hidden
#nullable disable

            __builder.AddMarkupContent(109, "<p class=\"muted\">No tensor jobs have been orchestrated yet.</p>");
#nullable restore
#line (109,1)-(112,1) "C:\Users\Dean\source\Aspire-Full - 1\Web\Aspire-Full.WebAssembly\Pages\TensorHub.razor"
        }
        else
        {

#line default
#line hidden
#nullable disable

            __builder.OpenElement(110, "table");
            __builder.AddAttribute(111, "class", "repo-table");
            __builder.AddMarkupContent(112, @"<thead><tr><th>Job Id</th>
                        <th>Model</th>
                        <th>Status</th>
                        <th>Provider</th>
                        <th>Created</th>
                        <th>Inspect</th></tr></thead>
                ");
            __builder.OpenElement(113, "tbody");
#nullable restore
#line (124,1)-(124,21) "C:\Users\Dean\source\Aspire-Full - 1\Web\Aspire-Full.WebAssembly\Pages\TensorHub.razor"
                    

#line default
#line hidden
#nullable disable

#nullable restore
#line (124,22)-(126,1) "C:\Users\Dean\source\Aspire-Full - 1\Web\Aspire-Full.WebAssembly\Pages\TensorHub.razor"
foreach (var job in _jobs)
                    {

#line default
#line hidden
#nullable disable

            __builder.OpenElement(114, "tr");
            __builder.AddAttribute(115, "class", 
#nullable restore
#line (126,38)-(126,92) "C:\Users\Dean\source\Aspire-Full - 1\Web\Aspire-Full.WebAssembly\Pages\TensorHub.razor"
job.Id == _activeJob?.Id ? "active-job" : string.Empty

#line default
#line hidden
#nullable disable
            );
            __builder.OpenElement(116, "td");
#nullable restore
#line (127,34)-(127,40) 26 "C:\Users\Dean\source\Aspire-Full - 1\Web\Aspire-Full.WebAssembly\Pages\TensorHub.razor"
__builder.AddContent(117, job.Id

#line default
#line hidden
#nullable disable
            );
            __builder.CloseElement();
            __builder.AddMarkupContent(118, "\n                            ");
            __builder.OpenElement(119, "td");
#nullable restore
#line (128,34)-(128,45) 26 "C:\Users\Dean\source\Aspire-Full - 1\Web\Aspire-Full.WebAssembly\Pages\TensorHub.razor"
__builder.AddContent(120, job.ModelId

#line default
#line hidden
#nullable disable
            );
            __builder.CloseElement();
            __builder.AddMarkupContent(121, "\n                            ");
            __builder.OpenElement(122, "td");
#nullable restore
#line (129,34)-(129,44) 26 "C:\Users\Dean\source\Aspire-Full - 1\Web\Aspire-Full.WebAssembly\Pages\TensorHub.razor"
__builder.AddContent(123, job.Status

#line default
#line hidden
#nullable disable
            );
            __builder.CloseElement();
            __builder.AddMarkupContent(124, "\n                            ");
            __builder.OpenElement(125, "td");
#nullable restore
#line (130,34)-(130,55) 26 "C:\Users\Dean\source\Aspire-Full - 1\Web\Aspire-Full.WebAssembly\Pages\TensorHub.razor"
__builder.AddContent(126, job.ExecutionProvider

#line default
#line hidden
#nullable disable
            );
            __builder.CloseElement();
            __builder.AddMarkupContent(127, "\n                            ");
            __builder.OpenElement(128, "td");
#nullable restore
#line (131,34)-(131,75) 26 "C:\Users\Dean\source\Aspire-Full - 1\Web\Aspire-Full.WebAssembly\Pages\TensorHub.razor"
__builder.AddContent(129, job.CreatedAt.ToLocalTime().ToString("u")

#line default
#line hidden
#nullable disable
            );
            __builder.CloseElement();
            __builder.AddMarkupContent(130, "\n                            ");
            __builder.OpenElement(131, "td");
            __builder.OpenElement(132, "button");
            __builder.AddAttribute(133, "class", "link");
            __builder.AddAttribute(134, "disabled", 
#nullable restore
#line (133,65)-(133,82) "C:\Users\Dean\source\Aspire-Full - 1\Web\Aspire-Full.WebAssembly\Pages\TensorHub.razor"
_jobInspectorBusy

#line default
#line hidden
#nullable disable
            );
            __builder.AddAttribute(135, "onclick", global::Microsoft.AspNetCore.Components.EventCallback.Factory.Create<global::Microsoft.AspNetCore.Components.Web.MouseEventArgs>(this, 
#nullable restore
#line (133,94)-(133,134) "C:\Users\Dean\source\Aspire-Full - 1\Web\Aspire-Full.WebAssembly\Pages\TensorHub.razor"
async _ => await InspectJobAsync(job.Id)

#line default
#line hidden
#nullable disable
            ));
            __builder.AddContent(136, "Inspect");
            __builder.CloseElement();
            __builder.CloseElement();
            __builder.CloseElement();
#nullable restore
#line (136,1)-(137,1) "C:\Users\Dean\source\Aspire-Full - 1\Web\Aspire-Full.WebAssembly\Pages\TensorHub.razor"
                    }

#line default
#line hidden
#nullable disable

            __builder.CloseElement();
            __builder.CloseElement();
#nullable restore
#line (139,1)-(140,1) "C:\Users\Dean\source\Aspire-Full - 1\Web\Aspire-Full.WebAssembly\Pages\TensorHub.razor"
        }

#line default
#line hidden
#nullable disable

            __builder.CloseElement();
            __builder.CloseElement();
        }
        #pragma warning restore 1998
#nullable restore
#line (143,8)-(403,1) "C:\Users\Dean\source\Aspire-Full - 1\Web\Aspire-Full.WebAssembly\Pages\TensorHub.razor"

    private static readonly JsonSerializerOptions JsonOptions = new(JsonSerializerDefaults.Web)
    {
        PropertyNameCaseInsensitive = true
    };

    private List<TensorModelDescriptor> _models = new();
    private IReadOnlyList<string> _executionProviders = Array.Empty<string>();
    private IReadOnlyList<TensorJobSummary> _jobs = Array.Empty<TensorJobSummary>();
    private TensorCapabilityResponse? _capabilities;
    private bool _isSubmitting;
    private bool _capabilityBusy;
    private string _statusMessage = string.Empty;
    private TensorJobStatus? _activeJob;
    private List<TensorInferenceChunk> _remoteChunks = new();
    private List<TensorInferenceChunk> _localChunks = new();
    private IReadOnlyList<double> _embeddingPreview = Array.Empty<double>();
    private string? _localExecutionProvider;
    private bool _jobInspectorBusy;
    private string? _jobInspectorMessage;

    protected override async Task OnInitializedAsync()
    {
        _models = (TensorOptions.Value.Models ?? new List<TensorModelDescriptor>()).ToList();
        _executionProviders = BuildProviderList(_models);
        await Task.WhenAll(DetectCapabilitiesAsync(), RefreshJobsAsync(), RefreshCatalogAsync()).ConfigureAwait(false);
    }

    private IReadOnlyList<string> BuildProviderList(IEnumerable<TensorModelDescriptor> models)
    {
        var providers = new HashSet<string>(StringComparer.OrdinalIgnoreCase)
        {
            "webgpu",
            "webgl2",
            "wasm-simd",
            "wasm-cpu"
        };

        foreach (var model in models)
        {
            foreach (var provider in model.PreferredExecutionProviders)
            {
                providers.Add(provider);
            }
            foreach (var provider in model.AlternateExecutionProviders)
            {
                providers.Add(provider);
            }
        }

        return providers.ToList();
    }

    private async Task DetectCapabilitiesAsync()
    {
        _capabilityBusy = true;
        try
        {
            _capabilities = await RuntimeService.DetectCapabilitiesAsync().ConfigureAwait(false);
        }
        finally
        {
            _capabilityBusy = false;
        }
    }

    private async Task RefreshJobsAsync()
    {
        _jobs = await JobService.GetRecentJobsAsync().ConfigureAwait(false);
    }

    private async Task RefreshCatalogAsync()
    {
        var catalog = await JobService.GetServerCatalogAsync().ConfigureAwait(false);
        if (catalog.Count == 0)
        {
            return;
        }

        var lookup = catalog.ToDictionary(model => model.Id, model => model, StringComparer.OrdinalIgnoreCase);
        _models = _models.Select(model => lookup.TryGetValue(model.Id, out var server)
            ? model with { Description = string.IsNullOrWhiteSpace(model.Description) ? server.Description : model.Description }
            : model).ToList();
    }

    private async Task HandleJobSubmissionAsync(TensorJobComposerSubmission submission)
    {
        if (string.IsNullOrWhiteSpace(submission.ModelId))
        {
            _statusMessage = "Select a model before submitting.";
            return;
        }

        var descriptor = _models.FirstOrDefault(model => string.Equals(model.Id, submission.ModelId, StringComparison.OrdinalIgnoreCase));
        if (descriptor is null)
        {
            _statusMessage = "Model descriptor not found.";
            return;
        }

        _isSubmitting = true;
        _statusMessage = "Executing local preview and queuing server job...";
        _localChunks = new List<TensorInferenceChunk>();
        _remoteChunks = new List<TensorInferenceChunk>();
        _embeddingPreview = Array.Empty<double>();
        _localExecutionProvider = null;
        StateHasChanged();

        try
        {
            await RunLocalExecutionAsync(descriptor, submission);
            await QueueServerJobAsync(descriptor, submission);
            await RefreshJobsAsync();
        }
        catch (Exception ex)
        {
            _statusMessage = $"Tensor job failed: {ex.Message}";
        }
        finally
        {
            _isSubmitting = false;
        }
    }

    private async Task RunLocalExecutionAsync(TensorModelDescriptor descriptor, TensorJobComposerSubmission submission)
    {
        if (string.IsNullOrWhiteSpace(descriptor.ModelUri))
        {
            return;
        }

        var executionRequest = new TensorExecutionRequest
        {
            ModelId = descriptor.Id,
            ModelUri = descriptor.ModelUri,
            ExecutionProvider = submission.ExecutionProvider,
            Prompt = submission.Prompt,
            InputImageUrl = submission.InputImageUrl,
            Metadata = new Dictionary<string, string>
            {
                ["InputName"] = descriptor.InputShape.Count > 0 ? "input" : "tokens",
                ["OutputName"] = "output"
            }
        };

        var result = await ExecutionService.ExecuteAsync(executionRequest).ConfigureAwait(false);
        _localExecutionProvider = result.ExecutionProvider;
        _localChunks = result.Chunks
            .Select(chunk => new TensorInferenceChunk
            {
                Type = chunk.Type,
                Content = chunk.Content,
                Sequence = chunk.Sequence,
                Confidence = chunk.Confidence
            })
            .ToList();

        _embeddingPreview = TryParseVectorPreview(_localChunks);
        _statusMessage = result.Status;
    }

    private async Task QueueServerJobAsync(TensorModelDescriptor descriptor, TensorJobComposerSubmission submission)
    {
        var jobRequest = new TensorJobSubmission
        {
            ModelId = descriptor.Id,
            Prompt = submission.Prompt,
            InputImageUrl = submission.InputImageUrl,
            ExecutionProvider = submission.ExecutionProvider,
            PersistToVectorStore = submission.PersistToVectorStore,
            Metadata = new Dictionary<string, string> { ["client"] = "wasm" }
        };

        var created = await JobService.SubmitJobAsync(jobRequest).ConfigureAwait(false);
        if (created is null)
        {
            _statusMessage = "Server-side tensor job could not be created.";
            return;
        }

        _activeJob = created;
        await foreach (var chunk in JobService.StreamJobOutputAsync(created.Id))
        {
            _remoteChunks.Add(chunk);
            _activeJob = _activeJob with { Output = _remoteChunks.ToList() };
            await InvokeAsync(StateHasChanged);
        }

        var refreshed = await JobService.GetJobAsync(created.Id).ConfigureAwait(false);
        if (refreshed is not null)
        {
            _activeJob = refreshed;
        }
    }

    private async Task InspectJobAsync(Guid jobId)
    {
        if (jobId == Guid.Empty)
        {
            _jobInspectorMessage = "Invalid job id.";
            return;
        }

        _jobInspectorBusy = true;
        _jobInspectorMessage = "Loading job output...";
        try
        {
            var job = await JobService.GetJobAsync(jobId).ConfigureAwait(false);
            if (job is null)
            {
                _jobInspectorMessage = "Job not found.";
                return;
            }

            _activeJob = job;
            _remoteChunks = job.Output?.ToList() ?? new List<TensorInferenceChunk>();
            _jobInspectorMessage = _remoteChunks.Count == 0
                ? "Job loaded. Awaiting server output or refresh."
                : $"Job loaded with {_remoteChunks.Count} streamed chunks.";
            await InvokeAsync(StateHasChanged);
        }
        catch (Exception ex)
        {
            _jobInspectorMessage = "Unable to inspect job: " + ex.Message;
        }
        finally
        {
            _jobInspectorBusy = false;
        }
    }

    private async Task RefreshActiveJobAsync()
    {
        if (_activeJob is null)
        {
            _jobInspectorMessage = "Select a job to refresh.";
            return;
        }

        await InspectJobAsync(_activeJob.Id).ConfigureAwait(false);
    }

    private static IReadOnlyList<double> TryParseVectorPreview(IReadOnlyList<TensorInferenceChunk> chunks)
    {
        var vectorChunk = chunks.FirstOrDefault(chunk => string.Equals(chunk.Type, "vector", StringComparison.OrdinalIgnoreCase));
        if (vectorChunk is null)
        {
            return Array.Empty<double>();
        }

        try
        {
            var values = JsonSerializer.Deserialize<List<double>>(vectorChunk.Content, JsonOptions);
            return values?.ToArray() ?? Array.Empty<double>();
        }
        catch
        {
            return Array.Empty<double>();
        }
    }

#line default
#line hidden
#nullable disable

        [global::Microsoft.AspNetCore.Components.InjectAttribute] private 
#nullable restore
#line (11,9)-(11,44) "C:\Users\Dean\source\Aspire-Full - 1\Web\Aspire-Full.WebAssembly\Pages\TensorHub.razor"
IOptions<TensorModelCatalogOptions>

#line default
#line hidden
#nullable disable
         
#nullable restore
#line (11,45)-(11,58) "C:\Users\Dean\source\Aspire-Full - 1\Web\Aspire-Full.WebAssembly\Pages\TensorHub.razor"
TensorOptions

#line default
#line hidden
#nullable disable
         { get; set; }
         = default!;
        [global::Microsoft.AspNetCore.Components.InjectAttribute] private 
#nullable restore
#line (10,9)-(10,30) "C:\Users\Dean\source\Aspire-Full - 1\Web\Aspire-Full.WebAssembly\Pages\TensorHub.razor"
ITensorRuntimeService

#line default
#line hidden
#nullable disable
         
#nullable restore
#line (10,31)-(10,45) "C:\Users\Dean\source\Aspire-Full - 1\Web\Aspire-Full.WebAssembly\Pages\TensorHub.razor"
RuntimeService

#line default
#line hidden
#nullable disable
         { get; set; }
         = default!;
        [global::Microsoft.AspNetCore.Components.InjectAttribute] private 
#nullable restore
#line (9,9)-(9,32) "C:\Users\Dean\source\Aspire-Full - 1\Web\Aspire-Full.WebAssembly\Pages\TensorHub.razor"
ITensorExecutionService

#line default
#line hidden
#nullable disable
         
#nullable restore
#line (9,33)-(9,49) "C:\Users\Dean\source\Aspire-Full - 1\Web\Aspire-Full.WebAssembly\Pages\TensorHub.razor"
ExecutionService

#line default
#line hidden
#nullable disable
         { get; set; }
         = default!;
        [global::Microsoft.AspNetCore.Components.InjectAttribute] private 
#nullable restore
#line (8,9)-(8,25) "C:\Users\Dean\source\Aspire-Full - 1\Web\Aspire-Full.WebAssembly\Pages\TensorHub.razor"
TensorJobService

#line default
#line hidden
#nullable disable
         
#nullable restore
#line (8,26)-(8,36) "C:\Users\Dean\source\Aspire-Full - 1\Web\Aspire-Full.WebAssembly\Pages\TensorHub.razor"
JobService

#line default
#line hidden
#nullable disable
         { get; set; }
         = default!;
    }
}
#pragma warning restore 1591
